function t(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}function e(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},n=0;n<10;n++)e["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(e).map(function(t){return e[t]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(t){r[t]=t}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}function n(t,e){return e={exports:{}},t(e,e.exports),e.exports}Object.defineProperty(exports,"__esModule",{value:!0});var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(e){r(this,t),this.types={},this.target=e||this,this.emit=this.dispatch.bind(this)}return t.prototype.on=function(t,e){return this.types[t]||(this.types[t]=[]),-1===this.types[t].indexOf(e)&&this.types[t].push(e),this},t.prototype.off=function(t,e){return this.types[t]&&(e?this.types[t].splice(this.types[t].indexOf(e),1):(this.types[t].length=0,delete this.types[t])),this},t.prototype.dispatch=function(t,e){var n=this,r=e||{};if(r.target||(r.target=this.target),r.type=t,this.types[t])for(var i=0,o=this.types[t].length;i<o;i++)n.types[t][i](r);return this},t}(),o=new i,s=Object.getOwnPropertySymbols,u=Object.prototype.hasOwnProperty,f=Object.prototype.propertyIsEnumerable,a=e()?Object.assign:function(e,n){for(var r,i,o=arguments,a=t(e),p=1;p<arguments.length;p++){r=Object(o[p]);for(var c in r)u.call(r,c)&&(a[c]=r[c]);if(s){i=s(r);for(var l=0;l<i.length;l++)f.call(r,i[l])&&(a[i[l]]=r[i[l]])}}return a},p=Object.prototype.toString,c=function(t){var e;return"[object Object]"===p.call(t)&&(null===(e=Object.getPrototypeOf(t))||e===Object.getPrototypeOf({}))},l="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},h=n(function(t){!function(e,n){"use strict";t.exports=function(){"use strict";function t(t,e){return null!=t&&Object.prototype.hasOwnProperty.call(t,e)}function e(e){if(!e)return!0;if(f(e)&&0===e.length)return!0;if("string"!=typeof e){for(var n in e)if(t(e,n))return!1;return!0}return!1}function n(t){return u.call(t)}function r(t){return"object"==typeof t&&"[object Object]"===n(t)}function i(t){return"boolean"==typeof t||"[object Boolean]"===n(t)}function o(t){var e=parseInt(t);return e.toString()===t?e:t}function s(n){function s(e,r){return n.includeInheritedProps||"number"==typeof r&&Array.isArray(e)||t(e,r)}function u(t,e){if(s(t,e))return t[e]}function a(t,e,n,r){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if("string"==typeof e)return a(t,e.split(".").map(o),n,r);var i=e[0],s=u(t,i);return 1===e.length?(void 0!==s&&r||(t[i]=n),s):(void 0===s&&("number"==typeof e[1]?t[i]=[]:t[i]={}),a(t[i],e.slice(1),n,r))}n=n||{};var p=function(t){return Object.keys(p).reduce(function(e,n){return"create"===n?e:("function"==typeof p[n]&&(e[n]=p[n].bind(p,t)),e)},{})};return p.has=function(e,r){if("number"==typeof r?r=[r]:"string"==typeof r&&(r=r.split(".")),!r||0===r.length)return!!e;for(var i=0;i<r.length;i++){var s=o(r[i]);if(!("number"==typeof s&&f(e)&&s<e.length||(n.includeInheritedProps?s in Object(e):t(e,s))))return!1;e=e[s]}return!0},p.ensureExists=function(t,e,n){return a(t,e,n,!0)},p.set=function(t,e,n,r){return a(t,e,n,r)},p.insert=function(t,e,n,r){var i=p.get(t,e);r=~~r,f(i)||(i=[],p.set(t,e,i)),i.splice(r,0,n)},p.empty=function(t,n){if(!e(n)&&null!=t){var o,u;if(o=p.get(t,n)){if("string"==typeof o)return p.set(t,n,"");if(i(o))return p.set(t,n,!1);if("number"==typeof o)return p.set(t,n,0);if(f(o))o.length=0;else{if(!r(o))return p.set(t,n,null);for(u in o)s(o,u)&&delete o[u]}}}},p.push=function(t,e){var n=p.get(t,e);f(n)||(n=[],p.set(t,e,n)),n.push.apply(n,Array.prototype.slice.call(arguments,2))},p.coalesce=function(t,e,n){for(var r,i=0,o=e.length;i<o;i++)if(void 0!==(r=p.get(t,e[i])))return r;return n},p.get=function(t,e,n){if("number"==typeof e&&(e=[e]),!e||0===e.length)return t;if(null==t)return n;if("string"==typeof e)return p.get(t,e.split("."),n);var r=o(e[0]),i=u(t,r);return void 0===i?n:1===e.length?i:p.get(t[r],e.slice(1),n)},p.del=function(t,n){if("number"==typeof n&&(n=[n]),null==t)return t;if(e(n))return t;if("string"==typeof n)return p.del(t,n.split("."));var r=o(n[0]);return s(t,r)?1!==n.length?p.del(t[r],n.slice(1)):(f(t)?t.splice(r,1):delete t[r],t):t},p}var u=Object.prototype.toString,f=Array.isArray||function(t){return"[object Array]"===u.call(t)},a=s();return a.create=s,a.withInheritedProps=s({includeInheritedProps:!0}),a}()}()}),y=function(t){if(!c(t)||"string"==typeof t)return t;var e=function(t,n,r){void 0===n&&(n={}),void 0===r&&(r=[]);for(var i=Object.keys(t),o=0,s=i.length;o<s;o++){var u=i[o],f=t[u];if(c(f))return e(f,n,r.concat(u));n[r.concat(u).join(".")]=f}return n};return e(t)},g=h.get,b=h.set,d=h.insert,v=h.push,O=h.del,S=h.has,j=h.empty,m=function(t){void 0===t&&(t={}),this.emitter=new i(this),this.state=a({},t),this.stateClone=a({},this.state)},w={size:{}};m.prototype.setState=function(t,e,n){var r=this;if(this.prevState=a({},this.state),this.state=a({},t),this.stateClone=a({},this.state),this.emitter.emit("update",{state:this.getState(),payload:e}),n)for(var i=Object.keys(n),o=0,s=i.length;o<s;o++)r.emitter.emit(i[o],{key:i[o],value:n[i[o]],state:r.getState()});return this.stateClone},m.prototype.getState=function(){return this.stateClone},m.prototype.getPrevState=function(){return this.prevState},m.prototype.subscribe=function(t,e){var n=this;return this.emitter.on(t,e),function(){return n.unsubscribe(t,e)}},m.prototype.unsubscribe=function(t,e){this.emitter.off(t,e)},m.prototype.empty=function(t){var e=this.getState(),n=y(t);j(e,n),this.setState(e,g(e,n),{path:null})},m.prototype.push=function(t){for(var e=[],n=arguments.length-1;n-- >0;)e[n]=arguments[n+1];var r=this.getState(),i=y(t);v.apply(void 0,[r,i].concat(e)),this.setState(r,g(r,i),{path:e})},m.prototype.insert=function(t,e,n){void 0===n&&(n=0);var r=this.getState(),i=y(t);d(r,i,e,n),this.setState(r,g(r,i),{path:e})},m.prototype.get=function(t,e){return void 0===e&&(e=null),g(this.getState(),t,e)},m.prototype.set=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var n=this.getState(),r={},i={};if(2===t.length&&"string"==typeof t[0])b(n,t[0],t[1]),b(r,t[0],t[1]),i[t[0]]=t[1];else if(1===t.length&&c(t[0])){for(var o=y(t[0]),s=Object.keys(o),u=0,f=s.length;u<f;u++)i[s[u]]=o[s[u]],b(n,s[u],o[s[u]]);r=a({},t[0])}this.setState(n,r,i)},m.prototype.has=function(t){return S(this.state,t)},m.prototype.delete=function(t){var e=this.getState(),n=g(e,t);O(e,t),this.setState(e,n),this.emitter.emit(t,{state:this.getState(),payload:null})},m.prototype.clone=function(){return new m(this.cloneState())},m.prototype.cloneState=function(){return JSON.parse(this.toJSON())},m.prototype.toJSON=function(){return JSON.stringify(this.getState(),null,2)},w.size.get=function(){return Object.keys(this.state).length},Object.defineProperties(m.prototype,w);var P=function(t){void 0===t&&(t={});var e=new m(t);return{getState:e.getState.bind(e),getPrevState:e.getPrevState.bind(e),subscribe:e.subscribe.bind(e),unsubscribe:e.unsubscribe.bind(e),get:e.get.bind(e),set:e.set.bind(e),has:e.has.bind(e),delete:e.delete.bind(e),empty:e.empty.bind(e),push:e.push.bind(e),insert:e.insert.bind(e),clone:e.clone.bind(e),size:e.size,toJSON:e.toJSON.bind(e)}};exports.Store=m,exports.store=P,exports.default=P;
//# sourceMappingURL=ost.js.map